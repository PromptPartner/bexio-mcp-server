---
phase: 06-distribution
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - bexio-mcp-server.mcpb
autonomous: false

user_setup:
  - service: npm
    why: "Package publishing requires npm account with @promptpartner org access"
    env_vars:
      - name: NPM_TOKEN
        source: "npmjs.com > Account > Access Tokens (or npm login interactively)"
    dashboard_config:
      - task: "Verify @promptpartner organization exists"
        location: "npmjs.com > Organizations"
      - task: "Ensure user has publish access to @promptpartner scope"
        location: "npmjs.com > Organizations > @promptpartner > Members"
  - service: github
    why: "Repository creation and release publishing"
    env_vars:
      - name: GITHUB_TOKEN
        source: "github.com > Settings > Developer settings > Personal access tokens"
    dashboard_config:
      - task: "Create promptpartner/bexio-mcp-server repository"
        location: "github.com/organizations/promptpartner/repositories/new"
  - service: mcp-registry
    why: "Directory listing submission"
    dashboard_config:
      - task: "Submit extension for review"
        location: "https://forms.gle/tyiAZvch1kDADKoP9"

must_haves:
  truths:
    - "npm package is published and installable via npx @promptpartner/bexio-mcp-server"
    - "GitHub release v2.0.0 exists with .mcpb bundle attached"
    - "MCP Registry submission is complete"
  artifacts:
    - path: "bexio-mcp-server.mcpb"
      provides: "MCPB bundle for release attachment"
    - path: "https://www.npmjs.com/package/@promptpartner/bexio-mcp-server"
      provides: "Published npm package"
    - path: "https://github.com/promptpartner/bexio-mcp-server/releases/tag/v2.0.0"
      provides: "GitHub release with assets"
  key_links:
    - from: "npm package"
      to: "GitHub repo"
      via: "package.json repository field"
      pattern: "github.com/promptpartner/bexio-mcp-server"
    - from: "GitHub release"
      to: "MCPB bundle"
      via: "release asset attachment"
      pattern: ".mcpb"
---

<objective>
Publish the Bexio MCP server to npm, create GitHub release with .mcpb bundle, and submit to MCP Registry.

Purpose: Make the server discoverable and installable through all three distribution channels: npm (for developers and npx users), GitHub (for source access and .mcpb download), and MCP Registry (for Claude Desktop directory listing).

Output: Published npm package, GitHub release v2.0.0 with .mcpb asset, MCP Registry submission completed.
</objective>

<execution_context>
@C:\Users\calvi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\calvi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-distribution/06-CONTEXT.md
@.planning/phases/06-distribution/06-RESEARCH.md
@.planning/phases/06-distribution/06-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build and pack MCPB bundle</name>
  <files>bexio-mcp-server.mcpb</files>
  <action>
Build the project and create the MCPB bundle:

1. Navigate to src directory
2. Run npm install (ensure dependencies are up to date)
3. Run npm run build (compiles TypeScript and builds UI)
4. Run npm run pack:mcpb (copies dist to root and runs mcpb pack)

The MCPB bundle should be created at the project root as bexio-mcp-server.mcpb.

If mcpb is not installed globally, install it first:
```bash
npm install -g @anthropic-ai/mcpb
```

Verify the bundle:
```bash
mcpb validate manifest.json
```
  </action>
  <verify>
Verify file exists: D:\AI\Bexio MCP v2\bexio-mcp-server.mcpb
Run: mcpb validate manifest.json
Check bundle size is reasonable (expected ~80-100KB compressed)
  </verify>
  <done>MCPB bundle exists and passes validation, ready for GitHub release attachment.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: npm Authentication and Organization Verification</name>
  <action>
Before publishing, the user must verify npm authentication and organization access.

**Required actions:**

1. **Verify npm login:**
   ```bash
   npm whoami
   ```
   If not logged in: `npm login`

2. **Verify @promptpartner organization exists on npmjs.com:**
   - Go to https://www.npmjs.com/org/promptpartner
   - If 404, create the organization first

3. **Verify publish access:**
   ```bash
   npm access ls-packages @promptpartner
   ```
   User must have write access to @promptpartner scope.

4. **Dry run to verify package contents:**
   ```bash
   cd src
   npm pack --dry-run
   ```
   Verify output shows expected files (dist/, README.md, LICENSE, package.json)
  </action>
  <how-to-verify>
1. Run `npm whoami` - should show your username
2. Run `npm access ls-packages @promptpartner` - should list packages or show empty (new org)
3. Run `cd src && npm pack --dry-run` - should show package contents
  </how-to-verify>
  <resume-signal>Type "npm ready" when logged in with @promptpartner org access verified, or describe any issues encountered.</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Publish npm package</name>
  <files>-</files>
  <action>
Publish the npm package with public access:

```bash
cd "D:\AI\Bexio MCP v2\src"
npm publish --access public
```

IMPORTANT: The --access public flag is REQUIRED for first publish of a scoped package.

After publishing, verify the package is available:

```bash
npm view @promptpartner/bexio-mcp-server
```

Expected output should show:
- name: @promptpartner/bexio-mcp-server
- version: 2.0.0
- description: MCP server for Bexio...

Test installation (in a temp directory):
```bash
npx @promptpartner/bexio-mcp-server --help
```
  </action>
  <verify>
Run: npm view @promptpartner/bexio-mcp-server version
Expected: 2.0.0

Run: npm view @promptpartner/bexio-mcp-server name
Expected: @promptpartner/bexio-mcp-server
  </verify>
  <done>npm package @promptpartner/bexio-mcp-server@2.0.0 is published and publicly accessible.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 4: GitHub Repository Creation</name>
  <action>
The GitHub repository must be created before pushing code and creating a release.

**Required actions:**

1. **Create the repository:**
   - Go to https://github.com/organizations/promptpartner/repositories/new
   - Repository name: bexio-mcp-server
   - Description: Complete Swiss accounting integration for Bexio with Claude Desktop
   - Visibility: Public
   - Do NOT initialize with README (we have our own)
   - Do NOT add .gitignore or license (we have our own)

2. **Add remote and push:**
   ```bash
   cd "D:\AI\Bexio MCP v2"
   git remote add origin https://github.com/promptpartner/bexio-mcp-server.git
   git push -u origin master
   ```

   If origin already exists with different URL:
   ```bash
   git remote set-url origin https://github.com/promptpartner/bexio-mcp-server.git
   git push -u origin master
   ```

3. **Verify repository is accessible:**
   - Go to https://github.com/promptpartner/bexio-mcp-server
   - Verify code is visible
  </action>
  <how-to-verify>
1. Repository exists at https://github.com/promptpartner/bexio-mcp-server
2. Code is pushed and visible
3. README.md displays correctly on GitHub
  </how-to-verify>
  <resume-signal>Type "repo ready" when the GitHub repository is created and code is pushed, or describe any issues.</resume-signal>
</task>

<task type="auto">
  <name>Task 5: Create GitHub Release with MCPB Bundle</name>
  <files>-</files>
  <action>
Create a tagged release with the MCPB bundle attached:

1. Create and push the version tag:
```bash
cd "D:\AI\Bexio MCP v2"
git tag -a v2.0.0 -m "Release 2.0.0 - Complete Bexio MCP Server"
git push origin v2.0.0
```

2. Create the release with MCPB bundle attached using gh CLI:
```bash
gh release create v2.0.0 \
  --title "v2.0.0 - Complete Swiss Accounting Integration" \
  --notes-file CHANGELOG.md \
  "./bexio-mcp-server.mcpb#MCPB Bundle for Claude Desktop"
```

If gh CLI is not authenticated:
```bash
gh auth login
```

If CHANGELOG.md is too long, use inline notes:
```bash
gh release create v2.0.0 \
  --title "v2.0.0 - Complete Swiss Accounting Integration" \
  --notes "Complete Bexio accounting integration for Claude Desktop with 221 tools.

## Installation

**MCPB (Claude Desktop):** Download and double-click the .mcpb file
**npm:** \`npx @promptpartner/bexio-mcp-server\`
**Source:** See README.md for manual setup

## Highlights

- 221 tools covering all Bexio API domains
- Swiss QR-bill payment support
- Interactive UI previews
- Dual transport: stdio + HTTP

See CHANGELOG.md for full details." \
  "./bexio-mcp-server.mcpb#MCPB Bundle for Claude Desktop"
```
  </action>
  <verify>
Run: gh release view v2.0.0 --repo promptpartner/bexio-mcp-server

Verify:
- Release title shows v2.0.0
- Asset "bexio-mcp-server.mcpb" is attached
- Release notes are present
  </verify>
  <done>GitHub release v2.0.0 created with MCPB bundle attached and downloadable.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 6: Submit to MCP Registry</name>
  <action>
Submit the extension to Anthropic's MCP Registry for inclusion in Claude Desktop's server browser.

**Required actions:**

1. **Go to submission form:**
   https://forms.gle/tyiAZvch1kDADKoP9

2. **Fill in the form with:**

   **Extension Name:** bexio-mcp-server

   **Short Description:** Complete Swiss accounting integration for Bexio

   **Full Description:**
   Connect Claude Desktop to your Bexio accounting system. Manage invoices, contacts, projects, time tracking, and 200+ more tools through natural conversation. Features Swiss QR-bill payment support, interactive invoice previews, and dual transport (stdio + HTTP).

   **Documentation URL:** https://github.com/promptpartner/bexio-mcp-server

   **npm Package:** @promptpartner/bexio-mcp-server

   **Category:** Business/Finance

   **Keywords:** bexio, accounting, invoices, swiss, mcp, claude

   **Privacy Policy:** https://www.bexio.com/en-CH/privacy-policy

   **Contact Email:** lukas@promptpartner.ai

   **Usage Examples:**
   - "Show me all unpaid invoices from last month"
   - "Create an invoice for contact 123 with item: Consulting 5h at CHF 150"
   - "List all projects with their time tracking totals"

3. **Submit and note confirmation**

Note: MCP Registry review is manual and not guaranteed to have a specific timeline.
  </action>
  <how-to-verify>
Form submission should show a confirmation page or message.
Note down any confirmation number or reference provided.
  </how-to-verify>
  <resume-signal>Type "registry submitted" when the MCP Registry form is submitted, or describe any issues with the form.</resume-signal>
</task>

</tasks>

<verification>
1. MCPB bundle exists and passes validation
2. npm package is published: npm view @promptpartner/bexio-mcp-server
3. GitHub release exists: gh release view v2.0.0 --repo promptpartner/bexio-mcp-server
4. Release has .mcpb asset attached
5. MCP Registry submission is complete
6. Package is installable: npx @promptpartner/bexio-mcp-server --help
</verification>

<success_criteria>
- npm package @promptpartner/bexio-mcp-server@2.0.0 is publicly installable
- GitHub release v2.0.0 has .mcpb bundle as downloadable asset
- MCP Registry submission completed (acceptance not guaranteed)
- All three distribution channels are live and accessible
</success_criteria>

<output>
After completion, create `.planning/phases/06-distribution/06-02-SUMMARY.md`
</output>
